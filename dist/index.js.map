{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\ninterface ListExtenderProps {\n  placeholder?: string;\n  validators?: [\n    (value: string, index?: number, list?: { [key: number]: string }) => boolean\n  ];\n  values?: string[];\n}\n\nexport const ListExtender = ({\n  placeholder = '',\n  validators,\n  values = [],\n}: ListExtenderProps) => {\n  const listObj: {[key: number]: string} = {}\n  const inputObj: {[key: number]: boolean} = {}\n  for (let i = 0; i < values.length; i++) {\n    listObj[i] = values[i]\n    inputObj[i] = false\n  }\n  const [list, setList] = useState<{ [key: number]: string }>(listObj);\n  const [isInput, setIsInput] = useState<{ [key: number]: boolean }>(inputObj);\n\n  // on list changed\n  useEffect(() => {\n    let addInput = true;\n    Object.keys(list).forEach((key) => {\n      if (!list[key].trim() || !validate(list[key], parseInt(key))) {\n        addInput = false;\n      }\n    });\n    if (addInput) {\n      setList((prevList) => {\n        const newList = { ...prevList };\n        newList[Object.keys(newList).length] = \"\";\n        return newList;\n      });\n      setIsInput((prevInput) => {\n        const newIsInput = { ...prevInput };\n        newIsInput[Object.keys(newIsInput).length] = true;\n        return newIsInput;\n      });\n    }\n  }, [list]);\n\n  // check if all validations pass\n  const validate = (value: string, index?: number) => {\n    if (!validators) {\n      return true;\n    }\n    for (let validator of validators) {\n      if (!validator(value, index, list)) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // change the text of an element\n  const setListText = (index: number, value: string) => {\n    setList((prevList) => {\n      const newList = { ...prevList };\n      newList[index] = value;\n      return newList;\n    });\n  };\n\n  // change whether el is input or text\n  const toggleInput = (index: number) => {\n    if (isInput[index] && !list[index].trim()) {\n      return;\n    }\n    setIsInput((prevInput) => {\n      const newList = { ...prevInput };\n      newList[index] = !newList[index];\n      return newList;\n    });\n  };\n\n  return (\n    <ul>\n      {Object.keys(list).map((key, index) => {\n        if (isInput[index]) {\n          return (\n            <li>\n              <input\n                key={index}\n                value={list[key]}\n                placeholder={placeholder}\n                onChange={(e) => setListText(index, e.target.value)}\n                onBlur={() => toggleInput(index)}\n                autoFocus={index !== Object.keys(list).length - 1}\n              />\n            </li>\n          );\n        } else {\n          return (\n            <li key={index} onDoubleClick={() => toggleInput(index)}>\n              {list[key]}\n            </li>\n          );\n        }\n      })}\n    </ul>\n  );\n};\n\nexport default ListExtender;\n"],"names":["ListExtender","placeholder","validators","values","listObj","inputObj","i","length","useState","list","setList","isInput","setIsInput","useEffect","addInput","Object","keys","forEach","key","trim","validate","parseInt","prevList","newList","prevInput","newIsInput","value","index","validator","setListText","toggleInput","React","map","onChange","e","target","onBlur","autoFocus","onDoubleClick"],"mappings":"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"}