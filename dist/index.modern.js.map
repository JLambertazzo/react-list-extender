{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\ninterface ListExtenderProps {\n  placeholder?: string;\n  validators?: [\n    (value: string, index?: number, list?: { [key: number]: string }) => boolean\n  ];\n}\n\nexport const ListExtender = ({\n  placeholder,\n  validators,\n}: ListExtenderProps) => {\n  const [list, setList] = useState<{ [key: number]: string }>({});\n  const [isInput, setIsInput] = useState<{ [key: number]: boolean }>({});\n\n  // on list changed\n  useEffect(() => {\n    let addInput = true;\n    Object.keys(list).forEach((key) => {\n      if (!list[key].trim() || !validate(list[key], parseInt(key))) {\n        addInput = false;\n      }\n    });\n    if (addInput) {\n      setList((prevList) => {\n        const newList = { ...prevList };\n        newList[Object.keys(newList).length] = \"\";\n        return newList;\n      });\n      setIsInput((prevInput) => {\n        const newIsInput = { ...prevInput };\n        newIsInput[Object.keys(newIsInput).length] = true;\n        return newIsInput;\n      });\n    }\n  }, [list]);\n\n  // check if all validations pass\n  const validate = (value: string, index?: number) => {\n    if (!validators) {\n      return true;\n    }\n    for (let validator of validators) {\n      if (!validator(value, index, list)) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // change the text of an element\n  const setListText = (index: number, value: string) => {\n    setList((prevList) => {\n      const newList = { ...prevList };\n      newList[index] = value;\n      return newList;\n    });\n  };\n\n  // change whether el is input or text\n  const toggleInput = (index: number) => {\n    if (isInput[index] && !list[index].trim()) {\n      return;\n    }\n    setIsInput((prevInput) => {\n      const newList = { ...prevInput };\n      newList[index] = !newList[index];\n      return newList;\n    });\n  };\n\n  return (\n    <ul>\n      {Object.keys(list).map((key, index) => {\n        if (isInput[index]) {\n          return (\n            <li>\n              <input\n                key={index}\n                value={list[key]}\n                placeholder={placeholder}\n                onChange={(e) => setListText(index, e.target.value)}\n                onBlur={() => toggleInput(index)}\n                autoFocus={index !== Object.keys(list).length - 1}\n              />\n            </li>\n          );\n        } else {\n          return (\n            <li key={index} onDoubleClick={() => toggleInput(index)}>\n              {list[key]}\n            </li>\n          );\n        }\n      })}\n    </ul>\n  );\n};\n\nexport default ListExtender;\n"],"names":["ListExtender","placeholder","validators","list","setList","useState","isInput","setIsInput","useEffect","addInput","Object","keys","forEach","key","trim","validate","parseInt","prevList","newList","length","prevInput","newIsInput","value","index","validator","setListText","toggleInput","React","map","onChange","e","target","onBlur","autoFocus","onDoubleClick"],"mappings":"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"}